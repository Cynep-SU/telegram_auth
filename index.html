<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login Widget</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<script async src="https://telegram.org/js/telegram-widget.js?19" data-telegram-login="integralspbot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
  function onTelegramAuth(user) {
    console.log(user)
    let new_url = "http://api.pank.su:25565/check_data?auth_date=" + user.auth_date + "&first_name=" + user.first_name + "&hash=" + user.hash + "&session=" + session + "&id=" + user.id
    if (user.last_name != undefined)
      new_url += "&last_name=" + user.last_name
    if (user.photo_url != undefined)
      new_url += "&photo_url=" + user.photo_url
    if (user.username != undefined)
      new_url += "&username=" + user.username
    window.location.replace(new_url);
  }
</script>
</body>
<script>
  const urlParams = new URLSearchParams(queryString);
  const session = urlParams.get('session')
</script>
</html>
